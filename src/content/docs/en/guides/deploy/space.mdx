---
title: Deploy your Astro Site to Space
description: How to build an Astro site in Space.
type: deploy
i18nReady: true
---
import InstallGuideTabGroup from '~/components/TabGroup/InstallGuideTabGroup.astro';
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro'

[Deta Space](https://deta.space/developers) is a personal computer that lives in the cloud — a ‘personal cloud’. You can build and run apps for yourself in your own "Space". You can publish the apps you've built, and they'll run for people all around the world.

This guide includes step-by-step instructions for building sites in Space. Both static and server-side rendered Astro sites are supported.

## Prerequisite

To push an Astro site to Space, make sure you first:

- Create a [Space account](https://deta.space).
- Install the [Space CLI](https://deta.space/docs/en/basics/cli) and log in.

Create a Space project **inside** the directory of your Astro project. Run the CLI and follow the instructions on the screen.    

```bash
space new
```

:::note
The Space CLI will try to auto-detect the configuration for your app. Accept the suggested configuration and then follow the instructions below, depending on the type of Astro app you want to deploy.
:::


## Project Configuration

### Static site

Make the following changes to the `Spacefile` file at the root of your project generated by the Space CLI. 
	
	1. Change the engine to `static`.
	2. Add Astro's build command to the list of `commands`.
	3. Serve the `dist` directory generated by Astro. 

```yaml title="Spacefile" "static" "- npm run build" "serve:dist"
# Spacefile Docs: https://go.deta.dev/docs/spacefile/v0
v: 0
micros:
  - name: static-astro-in-space
    src: .
    engine: static
    commands:
      - npm run build
    serve: dist
```

### Server-side rendering

If you wish to use [server-side rendering (SSR)](https://docs.astro.build/en/guides/server-side-rendering/) in your Astro project, you will need to install the [`@astrojs/node`](https://docs.astro.build/en/guides/integrations-guide/node/) adapter first. 

<PackageManagerTabs>
  <Fragment slot="npm">
  ```shell
  npx astro add node
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```shell
  yarn astro add node
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```shell
  pnpm astro add node
  ```
  </Fragment>
</PackageManagerTabs>

If you need to further configure the adapter, please follow the [`@astrojs/node` documentation](https://docs.astro.build/en/guides/integrations-guide/node/).

:::caution
When migrating from a static site to a server-rendered site, make sure you make all the proper adjustments based on the type of Astro site you are building. There are bits of configuration sprinkled around the documentation worth checking, but it's not limited to:

- [Dynamic routes for SSR](https://docs.astro.build/en/core-concepts/routing/#server-ssr-mode)
- [Modifying the `[...slug]` example for SSR](https://docs.astro.build/en/core-concepts/routing/#modifying-the-slug-example-for-ssr)
- [Building the content collections for SSR](https://docs.astro.build/en/guides/content-collections/#building-for-server-output-ssr)
:::

Make the following changes to the `Spacefile` file at the root of your project generated by the Space CLI:

1. Configure the `nodejs16` engine.
2. Add the `build` command.
3. Include the `dist` directory generated by Astro. 
4. Run the node command.

```yaml title="Spacefile" "nodejs16" "- npm run build" "- dist" "run: 'node ./dist/server/entry.mjs"'
# Spacefile Docs: https://go.deta.dev/docs/spacefile/v0
v: 0
micros:
  - name: ssr-astro-in-space
    src: .
    engine: nodejs16
    commands:
      - npm run build
    include:
      - dist
    run: "node ./dist/server/entry.mjs"
```

## How to deploy

Deploy your project with the following command:

```bash
space push
```

This will run the build process and create a new [Space app instance](https://deta.space/docs/en/basics/revisions#testing-changes) where you can access your Astro app.

By default Space apps are private and are only accessible to you. 

If you want to make your app available to others you can use [Public Routes](https://deta.space/docs/en/reference/spacefile#public_routes) to make parts of your app public. Or, you can [create a release](https://deta.space/docs/en/basics/releases) to let others install your app into their own personal cloud.

## Next steps

- [Add more compute to your Space project](https://deta.space/docs/en/basics/micros)
- [Store data for your Space project](https://deta.space/docs/en/basics/data)
- [Launch your Space app](https://deta.space/docs/en/basics/releases)

## Examples

- [Astro in Space](https://github.com/BogDAAAMN/astro-in-space) – GitHub
